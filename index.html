// Tab Switching
document.getElementById("streamTab").addEventListener("click", () => showTab("stream"));
document.getElementById("myPhotosTab").addEventListener("click", () => showTab("myPhotos"));
document.getElementById("accountTab").addEventListener("click", () => showTab("account"));

function showTab(tabId) {
  document.querySelectorAll(".tabContent").forEach((tab) => tab.style.display = "none");
  document.getElementById(tabId).style.display = "block";
}

// Upload Preview
const photoInput = document.getElementById("photoInput");
const uploadBtn = document.getElementById("uploadBtn");

uploadBtn.addEventListener("click", () => {
  if (photoInput.files.length === 0) return alert("Please choose a photo!");
  
  const reader = new FileReader();
  reader.onload = (e) => {
    const img = document.createElement("img");
    img.src = e.target.result;
    img.className = "photo";
    document.getElementById("myImages").prepend(img);
    document.getElementById("myPhotosTab").click(); // Switch to My Photos tab
  };
  reader.readAsDataURL(photoInput.files[0]);
});

// Auth Modal
const authModal = document.getElementById("authModal");
const loginBtn = document.getElementById("loginBtn");
const closeModal = document.getElementById("closeModal");

loginBtn.onclick = () => authModal.style.display = "block";
closeModal.onclick = () => authModal.style.display = "none";
window.onclick = (e) => {
  if (e.target == authModal) authModal.style.display = "none";
};

// Toggle between Login/SignUp
const switchAuth = document.getElementById("switchAuth");
const authTitle = document.getElementById("authTitle");
const authActionBtn = document.getElementById("authActionBtn");

switchAuth.onclick = () => {
  if (authTitle.innerText === "Login") {
    authTitle.innerText = "Sign Up";
    authActionBtn.innerText = "Sign Up";
    switchAuth.innerText = "Login";
    document.getElementById("toggleAuth").firstChild.nodeValue = "Already have an account? ";
  } else {
    authTitle.innerText = "Login";
    authActionBtn.innerText = "Login";
    switchAuth.innerText = "Sign up";
    document.getElementById("toggleAuth").firstChild.nodeValue = "Don't have an account? ";
  }
};

// Dummy stream images (for now)
const streamImages = document.getElementById("streamImages");
for (let i = 1; i <= 12; i++) {
  const img = document.createElement("img");
  img.src = `https://source.unsplash.com/random/300x300?sig=${i}`;
  img.className = "photo";
  streamImages.appendChild(img);
}
